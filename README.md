# Описание


С помощью docker-compose развернут образ с PostgreSQL. Обеспечена сохранность данных при рестарте контейнера (то есть - использованы volume-ы для хранения файлов СУБД на хост-машине).


Реализован на Python3 веб сервис (с помощью FastAPI), выполняющий следующие функции:


1. В сервисе реализован POST REST метод, принимающий на вход запросы с содержимым вида {"questions_num": integer}.

2. После получения запроса сервис, в свою очередь, запрашивает с публичного API (англоязычные вопросы для викторин) https://jservice.io/api/random?count=1 указанное в полученном запросе количество вопросов.

3. Далее, полученные ответы сохраняются в базе данных, причем сохранена следующая информация: 
	1. ID вопроса, 
	2. Текст вопроса, 
	3. Текст ответа, 
	4. - Дата создания вопроса. 
В случае, если в БД имеется такой же вопрос, к публичному API с викторинами выполняются дополнительные запросы до тех пор, пока не будет получен уникальный вопрос для викторины.

4. Ответом на запрос из п.2. является предыдущий сохранённый вопрос для викторины. В случае его отсутствия - пустой объект

# Инструкция


Dockerfile разварачивает FastAPI. 
Реализация веб сервиса на FastAPI находится в файле web_service_fastapi.py, в requirements.txt все необходимые библиотеки для установки.


В docker-compose.yaml два сервиса:
	- pg_db - БД PostgreSQL
	- app - веб сервис на FastAPI


create_db.py - скрипт для создания БД и таблицы в ней


api_requests.py - скрипт для передачи веб сервису, настроенном на 80 порт, количество вопросов




